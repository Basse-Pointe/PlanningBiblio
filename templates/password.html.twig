{# password.html.twig #}

{% extends 'base.html.twig' %}

{% block page %}
  <h3>Modification du mot de passe</h3>

  <h4>{{ login_firstname }} {{ login_name }}</h4>

  {% if op == 'valid' %}
    {% if password_verify is same as(false) %}
      Ancien mot de passe incorrect
      <br/><br/>
      <a href='javascript:history.back();'>Retour</a>
    {% elseif password_match is same as(false) %}
      Les nouveaux mots de passes ne correspondent pas
      <br/><br/>
      <a href='javascript:history.back();'>Retour</a>
    {% else %}
      Le mot de passe a été changé
      <br/><br/>
      <a href='{{ config("URL") }}/index.php'>Retour au planning</a>
      {% if cjinfo %}
        <script type='text/javascript'>CJInfo("{{ cjinfo }}","error");</script>
      {% endif %}
    {% endif %}
  {% else %}
    <form name='form' method='post' action='{{ asset("myaccount/password") }}'>
      <table class='tableauFiches'>
        <tr>
          <td>Ancien mot de passe : </td>
          <td>
            <input type='password' name='ancien' class='ui-widget-content ui-corner-all'/>
          </td>
        </tr>

        <tr>
          <td>Nouveau mot de passe : </td>
          <td>
            <input type='password' name='nouveau' class='ui-widget-content ui-corner-all'/>
          </td>
        </tr>

        <tr>
          <td>Confirmer le nouveau mot de passe : </td>
          <td>
            <input type='password' name='confirm' class='ui-widget-content ui-corner-all'/>
          </td>
        </tr>

        <tr>
          <td colspan='2' style='text-align:center;'>
            <br/>
            <input type='button' value='Annuler' onclick='location.href="{{ asset("agent") }}";' class='ui-button'/>
            <input type='submit' value='Modifier' class='ui-button' style='margin-left:30px;'/>
          </td>
        </tr>
      </table>
    </form>
  {% endif %}
{% endblock %}
